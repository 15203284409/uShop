webpackJsonp([4],{"1vqu":function(t,e){},Dpee:function(t,e){},P2Xi:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-table",{staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:t.list,"row-key":"id",border:"","tree-props":{children:"children"}}},[n("el-table-column",{attrs:{prop:"id",label:"角色编号",sortable:"",width:"120"}}),t._v(" "),n("el-table-column",{attrs:{prop:"rolename",label:"角色名称",sortable:"",width:"300"}}),t._v(" "),n("el-table-column",{attrs:{label:"状态",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.status?n("el-button",{attrs:{type:"primary"}},[t._v("启用")]):n("el-button",{attrs:{type:"info",disabled:""}},[t._v("禁用")])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"primary"},on:{click:function(n){return t.edit(e.row.id)}}},[t._v("编辑")]),t._v(" "),n("el-button",{attrs:{type:"danger"},on:{click:function(n){return t.remove(e.row.id)}}},[t._v("删除")])]}}])})],1)],1)},staticRenderFns:[]};var o=n("C7Lr")({props:["list","info"],methods:{remove:function(t){this.$emit("remove",t)},edit:function(t){this.info.formShow=!1,this.$emit("edit",t)}}},i,!1,function(t){n("Dpee")},"data-v-7c8c0ca7",null).exports,r=n("3cXf"),s=n.n(r),a=n("rVsN"),c=n.n(a),l=n("7UU8"),u=n("wliq"),f={props:["info"],methods:{checkProps:function(){var t=this;return new c.a(function(e,n){t.user.rolename?e():Object(u.a)("角色名称不能为空")})},change:function(){this.user.menus=s()(this.$refs.tree.getCheckedKeys())},editInfo:function(){var t=this;this.checkProps().then(function(){Object(l.G)(t.user).then(function(e){200===e.data.code&&(Object(u.b)(e.data.msg),t.info.show=!1,t.empty(),t.$emit("init"))})})},add:function(){var t=this;this.checkProps().then(function(){t.$emit("add",t.user)})},cncel:function(){this.info.show=!1,this.empty(),this.$refs.tree.setCheckedKeys([])},empty:function(){this.user=this.newUser},edit:function(t){var e=this;Object(l.H)(t).then(function(n){e.user=n.data.list,e.user.id=t,e.newList=JSON.parse(e.user.menus)})}},data:function(){return{user:{rolename:"",menus:[],status:1},newUser:{rolename:"",menus:[],status:1},newList:[],data:[],defaultProps:{children:"children",label:"title"}}},mounted:function(){var t=this;Object(l.j)().then(function(e){t.data=e.data.list})}},d={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-dialog",{attrs:{visible:t.info.show,title:t.info.formShow?"添加":"编辑"},on:{"update:visible":function(e){return t.$set(t.info,"show",e)},close:t.cncel}},[n("el-form",{attrs:{model:t.user}},[n("el-form-item",{attrs:{label:"角色名称","label-width":"80px"}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:t.user.rolename,callback:function(e){t.$set(t.user,"rolename",e)},expression:"user.rolename"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"角色权限","label-width":"80px"}},[n("el-tree",{ref:"tree",attrs:{data:t.data,"show-checkbox":"","node-key":"id","highlight-current":"",props:t.defaultProps,"default-checked-keys":t.newList},on:{"check-change":t.change}})],1),t._v(" "),n("el-form-item",{attrs:{label:"状态","label-width":"80px"}},[n("el-switch",{attrs:{"active-value":1,"inactive-value":2},model:{value:t.user.status,callback:function(e){t.$set(t.user,"status",e)},expression:"user.status"}})],1)],1),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"info"},on:{click:function(e){return t.cncel()}}},[t._v("取 消")]),t._v(" "),n("el-button",{directives:[{name:"show",rawName:"v-show",value:t.info.formShow,expression:"info.formShow"}],attrs:{type:"primary"},on:{click:function(e){return t.add()}}},[t._v("添 加")]),t._v(" "),n("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.info.formShow,expression:"!info.formShow"}],attrs:{type:"primary"},on:{click:function(e){return t.editInfo()}}},[t._v("编 辑")])],1)],1)],1)},staticRenderFns:[]};var h={data:function(){return{list:[],info:{show:!1,formShow:!0}}},methods:{init:function(){var t=this;Object(l.I)().then(function(e){t.list=e.data.list})},cncel:function(){this.info.show=!1},add:function(t){var e=this;Object(l.F)(t).then(function(t){200===t.data.code&&(Object(u.b)(t.data.msg),e.info.show=!1,e.init())})},remove:function(t){var e=this;this.$confirm("你确定要删除吗？","提示",{confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then(function(){Object(l.J)(t).then(function(t){200===t.data.code&&(Object(u.b)(t.data.msg),e.init())})}).catch(function(){})},edit:function(t){this.$refs.form.edit(t),this.info.show=!0}},mounted:function(){this.init()},components:{vList:o,vForm:n("C7Lr")(f,d,!1,function(t){n("1vqu")},null,null).exports}},m={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.info.show=!0,t.info.formShow=!0}}},[t._v("添加")]),t._v(" "),n("v-list",{attrs:{list:t.list,info:t.info},on:{remove:function(e){return t.remove(e)},edit:function(e){return t.edit(e)},cncel:t.cncel}}),t._v(" "),n("v-form",{ref:"form",attrs:{info:t.info,list:t.list},on:{add:function(e){return t.add(e)},init:t.init}})],1)},staticRenderFns:[]};var v=n("C7Lr")(h,m,!1,function(t){n("Z1Xb")},"data-v-7b042935",null);e.default=v.exports},Z1Xb:function(t,e){}});
//# sourceMappingURL=4.5754542fd2fd45595237.js.map